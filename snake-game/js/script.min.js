const canvas=document.getElementById("canvas"),context=canvas.getContext("2d");class SnakePart{constructor(e,t){this.x=e,this.y=t}}let speed,tileCount=20,tileSize=canvas.width/tileCount-2,headX=10,headY=10;const snakeParts=[];let tailLength=0,appleX=5,appleY=5,xVelocity=0,yVelocity=0,score=0;const gameMusic=new Audio("./music/gameMusic.mp3");function drawGame(){changeSnakePosition();isGameOver()||(clearScreen(),checkAppleCollision(),drawApple(),drawSnake(),drawScore(),speed=score>=5?16:score>=10?19:score>=20?22:score>=40?25:13,setTimeout(drawGame,1e3/speed))}function isGameOver(){let e=!1;if(0===yVelocity&&0===xVelocity)return!1;(headX<0||headX===tileCount||headY<0||headY===tileCount)&&(e=!0);for(let t=0;t<snakeParts.length;t++){const o=snakeParts[t];if(o.x===headX&&o.y===headY){e=!0;break}}if(e){context.fillStyle="hsl(255, 100%, 90%)",context.font="50px Poppins";const e=context.createLinearGradient(0,0,canvas.width,0);e.addColorStop("0","magenta"),e.addColorStop("0.5","blue"),e.addColorStop("1.0","red"),context.fillStyle=e,context.fillText("Game Over!",canvas.width/8,canvas.height/2),document.body.addEventListener("keydown",(e=>{32==e.keyCode&&window.location.reload()}))}return e&&(context.fillStyle="hsl(255, 100%, 90%)",context.font="18px Poppins",context.fillText('Press "Space" to RESTART',canvas.width/5,canvas.height/1.5)),e}function drawScore(){context.fillStyle="hsl(255, 100%, 90%)",context.font="10px Poppins",context.fillText("Score: "+score,canvas.width-65,20)}function clearScreen(){context.fillStyle="hsl(255, 0%, 0%)",context.fillRect(0,0,canvas.width,canvas.height)}function drawApple(){context.fillStyle="hsl(235, 65%, 50%)",context.fillRect(appleX*tileCount,appleY*tileCount,tileSize,tileSize)}function checkAppleCollision(){appleX==headX&&appleY==headY&&(appleX=Math.floor(Math.random()*tileCount),appleY=Math.floor(Math.random()*tileCount),tailLength++,score++)}function drawSnake(){gameMusic.play(),context.fillStyle="green";for(let e=0;e<snakeParts.length;e++){let t=snakeParts[e];context.fillRect(t.x*tileCount,t.y*tileCount,tileSize,tileSize)}for(snakeParts.push(new SnakePart(headX,headY));snakeParts.length>tailLength;)snakeParts.shift();context.fillStyle="hsl(255, 100%, 100%)",context.fillRect(headX*tileCount,headY*tileCount,tileSize,tileSize)}function changeSnakePosition(){headX+=xVelocity,headY+=yVelocity}function keyDown(e){if(38==e.keyCode){if(1==yVelocity)return;yVelocity=-1,xVelocity=0}else if(40==e.keyCode){if(-1==yVelocity)return;yVelocity=1,xVelocity=0}else if(37==e.keyCode){if(1==xVelocity)return;yVelocity=0,xVelocity=-1}else if(39==e.keyCode){if(-1==xVelocity)return;yVelocity=0,xVelocity=1}}gameMusic.volume=.1,gameMusic.loop=!0,document.body.addEventListener("keydown",keyDown),drawGame();